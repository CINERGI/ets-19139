<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
    <head>
        <title>ISO 19139</title>
        <meta charset="UTF-8" />
        <style type="text/css">
            body {
                color: black;
                background: white;
                font-family: Georgia, serif;
            }
            h1, h2, h3 {
                font-family: Verdana, sans-serif;
                color: #000099;
                text-align: left;
            }
            h1 {
                font-size: 1.4em;
                margin-top: 2em;
            }
            h2 {
                font-size: 1.2em;
            }
            h3 {
                font-size: 1em;
                margin-bottom: 0.5em;
            }
            table {
                margin-top: 0.5em;
                margin-bottom: 1em;
                border-collapse: collapse;
            }
            td, th {
                padding: 0.25em;
                border: 1px solid black;
            }
            caption, figcaption {
                font-weight: bold;
                text-align: left;
                margin: 0.25em;
            }
            th {
                font-weight: bold;
                font-family: Verdana, sans-serif;
                text-align: left;
                vertical-align: top;
                background: #eeeeee;
                color: #000099;
            }
            dt {
                margin-top: 0.5em;
                font-weight: bold;
            }
        </style>
    </head>
    <body>
        <h1>ISO 19139</h1>
        <h2>Scope</h2>

        <p>The following executable test suite (ETS) verifies the conformance to ISO19139: <a href="http://www.iso.org/iso/home/store/catalogue_tc/catalogue_detail.htm?csnumber=32557">http://www.iso.org/iso/home/store/catalogue_tc/catalogue_detail.htm?csnumber=32557</a></p> 
        <p>Several conformance classes are defined in the  specification:</p>

        <dl>
            <dt>Capabilities of conformance level 1</dt></br>
            <dd>Minimum conformance with this Technical Specification requires that geographic metadata instance (XML)
documents can be validated without error against the XML schemas. While many tools are available to test validation of XML instance
documents against provided XML Schemas, it is important to understand that not all validation tools
implement the full W3C XML Schema recommendation and not all validation tools interpret the W3C XML
Schema recommendation in the same manner. It is recommended that a tool with strict interpretation of XML
Schema and full support for the W3C XML Schema recommendation be used to ensure conformance.</dd>
        <dt>Capabilities of conformance level 2</dt></br>
            <dd><b>1. A.2.1 By-Value or By-Reference or gco:nilReason</b></br>
Validation of XML instance documents against the schemas described in this document is not all that is
required for conformance to this specification. However,
because of the design of the XCPT the property element may have no content or attributes, or it may have
both content and attributes and still be XML Schema-valid. It is not possible to constrain the co-occurrence of
content or attributes. Some mechanism in addition to an XML Schema validation (e.g., Schematron, XSL
Transformations) must be used to restrict a property to be exclusively by-value, or by-reference, or expressing
a NULL reason.</br></br></dd>
            <dd><b>2. A.2.2 Co-Constraints</b></br>
XML 1.0 does not support the enforcement of certain types of constraints. For example, co-constraints such
as the requirement that an 'extent' in the form of an 'EX_GeographicBoundingBox' or
'EX_GeographicDescription' be used in the 'MD_DataIdentification' object when the 'hierarchyLevel' of
'MD_Metadata' is equal to "dataset" can not be enforced with an XML schema.
</dd>

<dt>Capabilities of conformance level 3</dt></br>
            <dd><b>A.3 Against user define Schematron</b></br>
This conformance level validates an XML instance documents against a schematron uploaded by the users. This conformance level lets users test the XML instance against conformance 1 and 2 along with conformance 3 to validate the XML agsint the technical specifications as well as any other rules that are defined in the user entered schematron.

</br></br></dd>
        </dl>
	
	<h2>Test coverage</h2>
	<p>
	  "Table 1 in the ISO19139 specfication defines the conformance classes related to ISO19139 application schemas. In this test suite mandatory conformance requirements are checked, and every ISO19139 instance document is thoroughly validated against all referenced application schemas. However, the classes dealing with less commonly used types of objects are not covered by the current test suite. Table 1 below provides the name of the conformance classes, references to the relevant clause in the abstract test suite (ATS) in Annex A, and information about its implementation status."
</p>
	<table border="1" style="border-collapse: collapse;">
      <caption>Table 1 - Conformance class coverage</caption>
      <thead>
      <tr>
        <th>Name</th>
        <th>ATS reference</th>
        <th>Available in test suite</th>
      </tr>
      </thead>
      <tbody>
      <tr>
        <td>All ISO19139 application schemas</td>
        <td>A.1</td>
        <td>Yes</td>
      </tr>
	</tbody>
	    </table>
        <h2>Test suite structure</h2>

        <p>The test suite definition file (testng.xml) is located in the root package, 
            <code>org.opengis.cite.iso19139</code>. A conformance class corresponds to a &lt;iut&gt;
            element; each test element includes a set of test classes that contain the actual 
            test methods. The general structure of the test suite is shown in Table 2.</p>

        <table border="1" style="border-collapse: collapse;">
            <caption>Table 2 - Test suite structure</caption>
            <thead>
                <tr style="background-color:#eeeeee;">
                    <th style="width: 35%;">Conformance class</th>
                    <th>Test classes</th>
                </tr>
            </thead>
            <tbody>
                <tr style="vertical-align: top;">
                    <td>Conformance Level 1</td>
                    <td>
                        <ul style="list-style: none;">
                            <li>org.opengis.cite.iso19139.level1.Capability1Tests</li>
			    <li>org.opengis.cite.iso19139.level1.ValidateInputTest</li>
                        </ul>
                    </td>
                </tr>
                <tr style="vertical-align: top;">
                    <td>Conformance Level 2</td>
                    <td>
                        <ul style="list-style: none;">
                            <li>org.opengis.cite.iso19139.level2.Capability2Tests</li>
                        </ul>
                    </td>
                </tr>
		<tr style="vertical-align: top;">
                    <td>Conformance Level 3</td>
                    <td>
                        <ul style="list-style: none;">
                            <li>org.opengis.cite.iso19139.level3.Capability3Tests</li>
                        </ul>
                    </td>
                </tr>
            </tbody>
        </table>

        <p>The Javadoc documentation provides more detailed information about the test 
            methods that constitute the suite.</p>

        <h2>Test requirements</h2>
        <p>The documents listed below stipulate requirements that must be satisfied 
            by a conforming implementation.</p>
        <ul>
<li style="list-style: square;">[ISO-19139]
            <a href="http://www.iso.org/iso/home/store/catalogue_tc/catalogue_detail.htm?csnumber=32557" target="_blank">ISO19139</a></li>
            <li style="list-style:square;">[XMLSchema] <a href="http://www.w3.org/TR/xmlschema-1/" target="_blank"> XML Schema Part 1: Structures</a>, Second Edition </li>
        </ul>

        <h2>How to run the tests</h2>
        <p>The test suite may be run in any of the following environments:</p>
        <ul>
            <li style="list-style: square;">Integrated development environment (IDE): The main Java class is <code>
                    TestNGController</code>.</li>
            <li style="list-style: square;">RESTful API: Submit a request that includes the necessary arguments 
                to the <a href="../../../../rest/suites/iso19139/1.0/run" target="_blank" 
                          type="application/xml">test run controller</a>
            </li>
            <li style="list-style: square;">TEAM-Engine: Run the CTL script located in the <code>/src/main/ctl/</code> 
                directory.</li>
        </ul>

        <p>The test run arguments are summarized in Table 2. The <em>Obligation</em> 
            descriptor can have the following values: M (mandatory), O (optional), or C 
            (conditional).</p>
        <table border="1" style="border-collapse: collapse;">
            <caption>Table 2 - Test run arguments</caption>
            <thead>
                <tr>
                    <th>Name</th>
                    <th>Value domain</th>
                    <th>Obligation</th>
                    <th>Description</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>iut</td>
                    <td>URI</td>
                    <td>M</td>
                    <td>A URI that refers to the implementation under test or metadata about it.
                        Ampersand ('&amp;') characters must be percent-encoded as '%26'.</td>
                </tr>
                <tr>
                    <td>ics</td>
                    <td>int(1,2,3)</td>
                    <td>O</td>
                    <td><li>ics=1, to run only Conformance Level 1.</li>
                      <li>ics=2, to run both Conformance Level 1 and 2.</li>
                      <li>ics=3, to run Conformance Level 1, 2 and 3.</li></td>
                </tr>
		<tr>
                    <td>sch</td>
                    <td>URI</td>
                    <td>M</td>
                    <td>A URI that refers to the schematron.
                        Ampersand ('&amp;') characters must be percent-encoded as '%26' and when select ics=3 at that time it is mandatory.</td>
                </tr>
            </tbody>
        </table>
        <h3>For GET Request:</h3> iut and sch are URI's

        <h4>To test GET API:</h4>Example curl request <br/><b>curl -sS 'http://teamengineProjectURI/rest/suites/testName/1.0/run?iut=Metadata.xml&sch=Schematron.sch.sch&ics=3'</b>

        <h3>For Post API</h3>
        iut and sch are keys of the files attached in the POST Body.
        <h4>To test POST API:</h4>Whenever a user wants to test a Metadata file against a given Schematron (both given as a input by the user) with the help of the Teamengine's REST POST API. Example curl request<br/><b>curl -X POST --header "Content-Type:multipart/form-data" -F "iut=@path/to/XML" -F "sch=@path/to/Schematorn" http://teamengineProjectURI/rest/suites/testName/1.0/run</b><br/>
        path/to/XML is the path to the Metadata file and path/to/Schematorn is the path to the Schematron file.
        <h2>Release notes</h2>

        <h3>ISO19139-1.0</h3>
        <h4>r0:</h4>
        <ul> <b>Test Cases:</b>
           <li>Capabilty 1 test to check whether the XML conforms to A.1 clause of ISO 19139.</li>
        <li>Input Validation test to chcek whether the given input exists i.e the file path or URL actually to an existing resource.</li>
        <li>Input Validation test to chcek whether the given input is an XML file.</li>
        </ul>
<ul> <b>Rest Suite for ISO 19139:</b>
           <li>Using rest suite of ISO 19139 to validate  whether the XML conforms to A.1 clause of ISO 19139.</li>
        <li>User friendly error message is shown after the tests fail.</li>
        </ul>
        <ul> <b>Error handling is done for the following cases:</b>
           <li>When no XML file is passed as an argument to the test.</li>
	<li>When path to the XML file is not valid.</li>
	<li>When the given input XML file is corrupt.</li>
        </ul>
<ul> <b>JUnit Tests (both positive and negative scenarios) are done for the following test classes:</b>
           <li>ValidateInputTests</li>
	<li>Capability1Tests</li>
        </ul>
        <h4>r1:</h4>
        <ul> <b>Changes made in Test Report:</b>
           <li>Added summary of the result in "Result overview" page including pie chart. It includes following statistics:</li>
           <ul><li>Test Name and Version</li>
               <li>Session Id</li>
           <li>Result</li>
           <li>Input</li>
           <li>Date and Time Performed</li>
           </ul> 
           <li>Added these Contents on Reporter Output Page:</li>
            <ul><li>Total no of passed tests.</li>
               <li>Total no of skipped tests.</li>
               <li>Total no of failed tests.</li>
               <li>Final result of test.</li>
           </ul>
           <li>Added description column in the Result page.</li>
           <li>Added user friendly error messages in the Result page.</li>
           <li>Added user friendly name of test in the Result page.</li>
           <li>Changed the styling if the Result page</li>
        </ul>
        <h4>r2:</h4>
        <ul> <b>Test Cases:</b>
           <li>Capabilty 2 test to check whether the XML conforms to A.2 clause of ISO 19139.</li>
        </ul>
<ul> <b>Rest Suite for ISO 19139:</b>
           <li>Using rest suite of ISO 19139 to validate  whether the XML conforms to A.2 clause of ISO 19139.</li>
        <li>User friendly error message is shown after the tests fail.</li>
        </ul>
        <ul> <b>Error handling is done for the following cases:</b>
           <li>When user select level 1 at that time no conformance level A.2 rules not run.</li>
	</ul>
<ul> <b>JUnit Tests (both positive and negative scenarios) are done for the following test classes:</b>
           <li>Capability2Tests</li>
        </ul>
	<h4>r3:</h4>
        <ul> <b>Test Cases:</b>
           <li>Capabilty 3 test to check whether the XML conforms to A.3 clause of ISO 19139.</li>
        </ul>
<ul> <b>Rest Suite for ISO 19139:</b>
           <li>Using rest suite of ISO 19139 to validate  whether the XML conforms to A.3 clause of ISO 19139.</li>
        <li>User friendly error message is shown after the tests fail.</li>
        </ul>
        <ul> <b>Error handling is done for the following cases:</b>
           <li>When user select level 1 or (level 1+level 2) at that time no conformance level A.3 rules not run.</li>
	   <li>when user select (level 1+level 2+level 3) at that time if user not give schematron file or give wrong input path then result should be failed and give failure reason on final report.
	</ul>
<ul> <b>JUnit Tests (both positive and negative scenarios) are done for the following test classes:</b>
           <li>Capability3Tests</li>
        </ul>
        <h4>r4:</h4>
        <ul> <b>Changes made in TeamEngine-ServiceProvider for Conformance Level 3:</b>
           <li>Added REST API Handler in Teamengine Service Provider Module to handle POST requests where both Metadata and Schematron are sent as files in post body.</li>
        </ul>
    </body>
</html>